.container
  %h1 Todo List
  %div(data-bind="with: main.todos")
    %ul.todos(data-bind="foreach: todos")
      %li(data-bind="attr: {class: className}")
        %input(type="checkbox" data-bind="checked: completed")
        %span(data-bind="text: title")
    %a(data-bind="visible: allowClear, click: clearList") Clear List
    %input(type="text" placeholder="New Todo Title" data-bind="value: todoToAdd, event: {change: addTodoHandler}")

  %div(data-bind="with: main.eip")
    %p(data-bind="visible: state() == 'showing'")
      First name:
      %strong.first_name(data-bind="text: firstName") todo
      %button.btn.btn-important(data-bind="click: edit") Edit
    %p(data-bind="visible: state() == 'editing'")
      %input(data-bind="value: firstNameEdit")
      %button.btn.btn-important(data-bind="click: save") Save
      %button.btn.btn-important(data-bind="click: reset") Reset

:javascript
  $(document).ready(function(){
    var todos = [ new Todo("check AngularJs"),
                  new Todo("learn how to use Sublime snippets"),
                  new Todo("setup database on Mogolab") ];
    dTodos = Todos.create(todos);
    main = {todos : dTodos, eip : EIP};
    ko.applyBindings(main);
  });
